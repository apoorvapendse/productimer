<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productimer</title>
    <link rel="stylesheet" href="slider.css">
    <link rel="stylesheet" href="home.css">
    <link rel="stylesheet" href="navicon.css">
  
    <script src="https://code.jquery.com/jquery-3.2.1.js"></script>
                                    
    <link href="https://cdn.jsdelivr.net/npm/round-slider@1.6.1/dist/roundslider.min.css" rel="stylesheet" />
                                        
    <script src="https://cdn.jsdelivr.net/npm/round-slider@1.6.1/dist/roundslider.min.js"></script>
    

  
</head>
<body>

    <div id="sidemenuButton" onclick="toggleMenu()" >
        <span></span>
        <span></span>
        <span></span>
    </div>
    <div id="seeds">
       
    </div>
    <div id="number">

    </div>
    <div class="container">
      
            <div class="sliderContainer">

                <div id="slider" class="slider"></div>
            </div>
            
       
        <button id="plant"><h3>PLANT</h3></button>
    </div>
    <div id="menu" >
        <div class="options">
            <ul class="optionsList">
                <li>Forest</li>
                <li>Timeline</li>
                <li>Tags</li>
                <li>Friends</li>
                <li>Achievements</li>
                <li>Store</li>
                <li>About</li>
                <li>Settings</li>
                <li>
                    <form action="/logout" method="post">

                        <button id="logoutBtn">
                             Logout
                        </button>
                    </form>
                </li>

            </ul>
            

        </div>
    </div>

    
    <script >
       const toggleMenu = ()=>{
        const menu = document.getElementById("menu");
        menu.classList.toggle('menuToggle')
       }
    </script>


    <script>

let currentDuration=0;
let isPlanted = false;


        $("#slider").roundSlider({
    radius: 135,
    sliderType: "min-range",
    value: 45,
    handleSize:20,
    width:22,
    min:0,
    max:180,
    step:1,
    create: "traceEvent",
   start:"traceEvent",
    stop: "traceEvent",
    change:"traceEvent"
   


});


function traceEvent(e) {
   currentDuration= e.value;
   console.log("currDur:",currentDuration)
}

    const plantBtn = document.getElementById("plant");
    const timeDisplay = document.querySelector('.rs-tooltip-text');
    
    plantBtn.addEventListener("click",()=>{
        if(!isPlanted){
            timeDisplay.style.paddingRight = '70px'
            timeDisplay.style.border = 'none'

            //tree is not planted, so plant it now
            let durationInSeconds = currentDuration*60;
            
            
            const timer = setInterval(() => {
                
                let displaySeconds = durationInSeconds%60;
                
                let displayMinutes = Math.floor(durationInSeconds/60); 
                
                durationInSeconds--;
                $("#slider").roundSlider({
                    value:displayMinutes
                })
                
                timeDisplay.innerText = `${displayMinutes}:${displaySeconds}`
                if(durationInSeconds<=0){
                    clearInterval(timer)
                }
            }, 1000);
        }
       
        

        




    })

    </script>



    
</script>
   
</body>
</html>